<!-- Page Title -->
<div class="page-title-area" style="background-image: url(assets/images/page-title/page-title-4.jpg);">
    <div class="container">
        <div class="page-title-content">
            <h2>Register</h2>
            <ul>
                <li><a routerLink="/">Home</a></li>
                <li>Register</li>
            </ul>
        </div>
    </div>
</div>

<!-- Register -->
<div class="user-area ptb-100">
    <div class="container">
        <div class="user-form-content">
            <h3>Create an account</h3>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label>Name</label>
                    <input class="form-control" type="text" formControlName="name">
                    <small *ngIf="name?.invalid && name?.touched" class="text-danger">
                        Name is required.
                    </small>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input class="form-control" type="email" formControlName="email">
                    <small *ngIf="email?.invalid && email?.touched" class="text-danger">
                        Enter a valid email address.
                    </small>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input class="form-control" type="password" formControlName="password">
                    <small *ngIf="password?.invalid && password?.touched" class="text-danger">
                        Password must be at least 6 characters.
                    </small>
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input class="form-control" type="password" formControlName="confirmPassword">
                    <small *ngIf="confirmPassword?.invalid && confirmPassword?.touched" class="text-danger">
                        Confirm your password.
                    </small>
                    <small *ngIf="registerForm.hasError('passwordMismatch')" class="text-danger">
                        Passwords do not match.
                    </small>
                </div>
                <!-- Access Code - show only when passwords match -->
                <div class="form-group" *ngIf="!registerForm.hasError('passwordMismatch') && confirmPassword?.valid">
                    <label>Access Code</label>
                    <input class="form-control" type="text" formControlName="code">
                    <small *ngIf="code?.invalid && code?.touched" class="text-danger">
                        Access Code is required.
                    </small>
                </div>
                <!-- Register Button - show only when passwords match -->
                <div *ngIf="!registerForm.hasError('passwordMismatch') && confirmPassword?.valid">
                    <button class="default-btn" type="submit" [disabled]="registerForm.invalid || loading">
                        {{ loading ? 'Registering...' : 'Register' }}
                    </button>
                </div>
                <p class="create">Already have an account? <a routerLink="/hccmat">Login now</a></p>
                <div *ngIf="errorMessage" class="alert alert-danger mt-2">
                    {{ errorMessage }}
                </div>
            </form>
        </div>
    </div>
</div>